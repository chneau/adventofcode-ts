# Advent of Code TypeScript

This repository contains TypeScript solutions for
[Advent of Code](https://adventofcode.com/) puzzles, powered by
[Bun](https://bun.sh).

After lack of time and laziness, this project is heavily using AI (gemini pro
and copilot). Most of the solutions (body of part 1 and part 2 functions) are
generated by AI, with some human tweaking when necessary.

What is done manually:

- Writting the parse function to convert the input string into usable data
  structures that make sense for the problem.
- Copy/pasting the problem (Part 1 and Part 2) and input into Copilot to get the
  solution code, cursor on body of `p1` or `p2` function.
- Fix type errors.
- Check the example result is correct, if not, try to fix it or regenerate the
  code.
- Submit solution on the AoC website.
- Ask gemini pro: `@README.md add the benchmark for day 5` (instructions are
  already in the README.md as a comment).
- `br all` (check code, upgrade deps, lint) and commit.

## Prerequisites

- [Bun](https://bun.sh) runtime.

## Setup

1. **Install dependencies:**

   ```bash
   bun install
   ```

2. **Configure your session cookie:** To automatically fetch puzzle inputs, you
   need your AoC session cookie.

   - Get your `session` cookie from adventofcode.com (inspect your browser's
     cookies).
   - **Option A:** Set the `AOC_SESSION` environment variable.
   - **Option B:** Create a file named `.cache/session` (create the `.cache`
     folder if it doesn't exist) and paste your session string into it.

   > **Note:** The `.cache` directory is included in `.gitignore` to keep your
   > session data private.

## Usage

### Run a Solution

To run a specific day's solution. If the file does not exist, it will be
automatically created from a template.

```bash
bun start aoc_YYYY_DD
```

**Example:**

```bash
bun start aoc_2025_01
```

**What this does:**

1. Checks if `aoc_2025_01.ts` exists.
2. If it doesn't exist:
   - Creates the file using a standard template.
   - Fetches the puzzle input from adventofcode.com (using your session cookie)
     and saves it to `.cache/`.
3. Runs the exported functions: `p1ex` (Part 1 Example), `p1` (Part 1), `p2ex`
   (Part 2 Example), and `p2` (Part 2).
4. Runs benchmarks for `p1` and `p2`.

### Scripts

The `package.json` includes several helper scripts:

- `bun start <filename_without_extension>`: Runs the specified solution file in
  watch mode.
- `bun run check`: Runs formatting and linting checks using `deno fmt`,
  `oxlint`, and `biome`.
- `bun run lint`: Runs the TypeScript compiler check (`tsc --noEmit`).
- `bun run upgrade`: Updates dependencies to the latest versions.
- `bun run all`: Runs upgrade, check, and lint in sequence.

## Project Structure

- `index.ts`: The main entry point that handles loading solution files, running
  functions, and benchmarking.
- `session.ts`: Manages fetching and caching of puzzle inputs.
- `aoc_YYYY_DD.ts`: Solution files for Advent of Code.
- `apug_YYYY_DD.ts`: Solutions for [APUG](https://leechristie.com/xmas24/)
  puzzles.
- `.cache/`: Directory for storing session cookies and cached puzzle inputs.

## Features

- **Automatic Template Generation**: Start working immediately by running the
  command for a new day.
- **Input Caching**: Respects AoC servers by caching inputs locally.
- **Built-in Benchmarking**: Uses `mitata` to benchmark your solutions
  automatically.
- **Hybrid Performance Comparison**: Some solutions (e.g., `aoc_2025_02`)
  include optimized C implementations via `bun:ffi`. These are automatically
  benchmarked alongside the TypeScript versions (`p1_c` vs `p1`).
- **Type Safety**: Uses `zod` for input parsing validation.

## License

This project is open source.

## Benchmarks

Benchmarks are run on a AMD Ryzen 9 270 w/ Radeon 780M Graphics. Runtime: bun
1.3.3 (x64-linux)

<!--
# AI instructions to add a benchmark to the table:
Day title: curl the page and get the title from the first h2 element.
To benchmark it, run `bun run index.ts aoc_YYYY_DD` and copy the times from the output.
 -->

|        | Day                                                               |  Part 1 |  Part 2 |
| :----- | :---------------------------------------------------------------- | ------: | ------: |
| ⭐️⭐️ | [Day 1: Secret Entrance](https://adventofcode.com/2025/day/1)     | 0.025ms | 0.020ms |
| ⭐️⭐️ | [Day 2: Gift Shop](https://adventofcode.com/2025/day/2)           | 0.002ms | 0.042ms |
| ⭐️⭐️ | [Day 3: Lobby](https://adventofcode.com/2025/day/3)               |  1.29ms | 0.414ms |
| ⭐️⭐️ | [Day 4: Printing Department](https://adventofcode.com/2025/day/4) | 0.469ms | 25.73ms |
| ⭐️⭐️ | [Day 5: Cafeteria](https://adventofcode.com/2025/day/5)           | 0.566ms | 0.019ms |
|        | Day 6                                                             |         |         |
|        | Day 7                                                             |         |         |
|        | Day 8                                                             |         |         |
|        | Day 9                                                             |         |         |
|        | Day 10                                                            |         |         |
|        | Day 11                                                            |         |         |
|        | Day 12                                                            |         |         |

<!--
# AI instructions to run a new day fromn scratch:
1. Run `bun run index aoc_YYYY_XX` (replace XX with the day number, zero-padded).
this will create the file
Only do this if the file does not already exist

## for p1:
2. Read this file
if the p1 is already written, skip it and go to p2
3. Read the problem description for part 1 from https://adventofcode.com/YYYY/day/XX with a curl command
4. Read the aoc_2025_04.ts file to see how the parse function is written
Modify it as it fits, the idea is for p1 or p2 to not have to do data manipulation anymore
5. solve it and write the code in the p1 function
6. Do not test, do not commit, just stop now as I manually have to check the solution and submit it
Best you can do here is run bun run lint to check for type errors and fix them, generally just with type assertions

## for p2:
7. Read the problem description for part 2 from https://adventofcode.com/YYYY/day/XX with a curl command
This time, you will have to set a "Cookie" header with the session cookie to be able to access the part 2 description. Read the file in .cache/session to get the session cookie value.
8. solve it and write the code in the p2 function
9. Do not test, do not commit, just stop now as I manually have to check the solution and submit it
Best you can do here is run bun run lint to check for type errors and fix them, generally just with type assertions

## helpers
if the problem requires different input parsing, read aoc_2025_05.ts and see how a parseP2 function is written and used in p2
-->
